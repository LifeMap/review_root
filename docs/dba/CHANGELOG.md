# 데이터베이스 변경 로그

이 파일은 리뷰 모으기 서비스 데이터베이스의 모든 스키마 변경사항을 시간순으로 기록합니다.

---

## [v1.0.0] - 2026-01-30

### 추가 (Added)

**초기 데이터베이스 스키마 설계**

- `users` 테이블: 사용자 계정 관리 (이메일/소셜 로그인, 이메일 인증, 비밀번호 재설정)
- `user_profiles` 테이블: 카테고리별 사용자 프로필 (패션: 체형 정보, 향후 뷰티/가전/식품 확장 고려)
- `platforms` 테이블: 쇼핑 플랫폼 정보 (29cm, 무신사, 네이버 스마트스토어)
- `products` 테이블: 상품 정보 (이름, 브랜드, 카테고리, 평균 평점, 리뷰 수)
- `product_platform_mappings` 테이블: 상품-플랫폼 매핑 (가격 비교, 구매 링크, 재고 상태)
- `reviews` 테이블: 리뷰 정보 (내용, 평점, 리뷰어 체형 정보, 사이즈 피드백)
- `review_analyses` 테이블: AI 기반 리뷰 분석 (광고성 판별, 단점 상세도 점수, 감성 분석)
- `review_keywords` 테이블: 리뷰 키워드 추출 (장점/단점/중립 구분)
- `product_summaries` 테이블: 상품별 리뷰 요약 (장단점 Top 3, 통계)
- `size_insights` 테이블: 사이즈 인사이트 (패션 특화, 사이즈별 구매 통계 및 핏 피드백)
- `recent_views` 테이블: 최근 본 상품 이력

**핵심 기능 지원:**
- ✅ 멀티 플랫폼 리뷰 통합
- ✅ 광고성 리뷰 필터링
- ✅ 단점 중심 큐레이션
- ✅ 패션 카테고리 체형 프로필 기반 개인화
- ✅ 가격 비교 및 구매 링크
- ✅ 사이즈 인사이트 (패션 특화)

**인덱싱 전략:**
- 검색 성능 최적화: FULLTEXT 인덱스 (상품명, 브랜드)
- 필터링 성능 최적화: 광고성, 평점, 사진 유무, 사이즈 피드백 인덱스
- 정렬 성능 최적화: 단점 상세도 점수, 최신순, 평점순 인덱스
- 복합 인덱스: 사용자별 최근 조회 (user_id, viewed_at DESC)

**보안 설계:**
- 비밀번호: bcrypt 해싱 (cost 12)
- 개인정보 암호화: 체형 정보 (AES-256-GCM)
- 리뷰어 마스킹: 닉네임 가운데 글자 마스킹
- 외래키 제약: CASCADE/RESTRICT 정책 적용

**확장성 고려:**
- 멀티 카테고리 확장 (v2.0): 뷰티, 가전, 식품 프로필 컬럼 사전 정의
- 찜하기 (v1.1), 가격 알림 (v1.2) 확장 계획 문서화
- 파티셔닝 전략 (대용량 데이터 대비)

### 문서

- [v1.0.0_initial-database-design.md](v1.0.0_initial-database-design.md): 초기 데이터베이스 설계 상세 문서
  - ERD 다이어그램
  - 테이블 스키마 정의 (11개 테이블)
  - 관계 정의 (1:N, 외래키 제약)
  - 인덱싱 전략
  - 데이터 타입 선정 근거
  - 마이그레이션 계획
  - 보안 고려사항
  - 향후 확장 계획

### 마이그레이션 참고

**테이블 생성 순서:**
1. `users`
2. `user_profiles`
3. `platforms`
4. `products`
5. `product_platform_mappings`
6. `product_summaries`
7. `size_insights`
8. `reviews`
9. `review_analyses`
10. `review_keywords`
11. `recent_views`

**초기 데이터 삽입:**
- 플랫폼 데이터: 29cm, 무신사, 네이버 스마트스토어
- 관리자 계정 (선택)

---

## 변경 이력 작성 가이드

### 버전 형식
- `[vMAJOR.MINOR.PATCH]` - YYYY-MM-DD

### 카테고리
- **추가 (Added)**: 새로운 테이블, 컬럼, 인덱스
- **변경 (Changed)**: 기존 스키마 수정
- **삭제 (Removed)**: 테이블, 컬럼, 인덱스 제거
- **수정 (Fixed)**: 버그 수정, 데이터 정합성 개선
- **보안 (Security)**: 보안 관련 변경사항

### 예시
```markdown
## [v1.1.0] - 2026-02-15

### 추가 (Added)
- `user_favorites` 테이블: 사용자 찜하기 기능 지원

### 변경 (Changed)
- `products` 테이블: `favorite_count` 컬럼 추가 (INT UNSIGNED, DEFAULT 0)
```

---

**문서 끝**
